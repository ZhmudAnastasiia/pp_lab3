{% extends 'library/base.html' %}

{% block title %}Редагувати книгу{% endblock %}

{% block content %}
<h1>Редагувати книгу: {{ book.title }}</h1>

<form method="post">
    {% csrf_token %}
    {{ form.non_field_errors }} 

    <label for="title">Назва:</label>
    <input type="text" id="title" name="title" value="{{ book.title }}" required><br>

    <label for="publication_year">Рік публікації:</label>
    <input type="number" id="publication_year" name="publication_year" value="{{ book.publication_year }}" required><br>

    <h3>Автори:</h3>
    {% for author in authors %}
        <label>
            <input type="checkbox" name="authors" value="{{ author.id }}"
                {% if author in selected_authors %} checked {% endif %}>
            {{ author }}
        </label><br>
    {% endfor %}

    <h3>Категорії:</h3>
    {% for category in categories %}
        <label>
            <input type="checkbox" name="categories" value="{{ category.id }}"
                {% if category in selected_categories %} checked {% endif %}>
            {{ category }}
        </label><br>
    {% endfor %}

    <button type="submit">Зберегти зміни</button>
</form>

{% if book and book.id %}
    <div>
        <a href="{% url 'library:author_create' book.id %}">Додати автора</a><br>
        <a href="{% url 'library:category_create' book.id %}">Додати категорію</a><br>
    </div>
{% endif %}
{% if book and book.id %}
    <a href="{% url 'library:book_detail' book.id %}">Назад до детальної інформації про книгу</a>
{% endif %}
{% endblock %}

