<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Top Readers</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <h1>Top Readers for Author {{ author_id }}</h1>

    <label for="books-read-input">Filter by Books Read (Min):</label>
    <input type="text" id="books-read-input" placeholder="Enter min books" value="{{ request.GET.min_books_read|default:'0' }}">

    <button id="filter-button">Apply Filter</button>

    <div id="graph-container">
        {{ graph|safe }}
    </div>

    <script>
        $('#filter-button').on('click', function() {
            const minBooksRead = $('#books-read-input').val();

            if (!isNaN(minBooksRead) && minBooksRead.trim() !== '') {
                window.location.href = `?min_books_read=${minBooksRead}`;
            } else {
                alert("Please enter a valid number.");
            }
        });
    </script>

    <button onclick="location.href='/dashboard1/reader-activity/'">
    Графік активності читачів
    </button> 
</body>
</html>
