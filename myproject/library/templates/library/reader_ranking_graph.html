<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reader Ranking</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <h1>Reader Ranking for Category {{ category_id }}</h1>

    <label for="sort-order">Sort by Average Borrows:</label>
    <select id="sort-order">
        <option value="asc" {% if request.GET.sort_order == 'asc' %}selected{% endif %}>Ascending</option>
        <option value="desc" {% if request.GET.sort_order == 'desc' %}selected{% endif %}>Descending</option>
    </select>
    <button id="sort-button">Apply Sorting</button>

    <div id="graph-container">
        {{ graph|safe }}
    </div>

    <script>
        $('#sort-button').on('click', function() {
            const sortOrder = $('#sort-order').val();
            window.location.href = `?sort_order=${sortOrder}`;
        });
    </script>

    <button onclick="location.href='/dashboard1/top-readers/2/'">
    Графік читачів автора з id=1
    </button> 
</body>
</html>
